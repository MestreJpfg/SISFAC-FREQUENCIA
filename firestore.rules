/**
 * @fileoverview Firestore Security Rules for Attendance Tracker application.
 *
 * Core Philosophy:
 * This ruleset provides completely open access to all data for prototyping purposes.
 * In the next phase, we will implement a more secure access model.
 *
 * Data Structure:
 * - /students/{studentId}: Stores student profile data.
 * - /attendance/{attendanceId}: Stores individual attendance records.
 *
 * Key Security Decisions:
 * - Currently, all read and write access is open to facilitate rapid prototyping.
 * - In a production environment, this would need to be locked down based on user roles or ownership.
 *
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows read and write access to student data for all users.
     * @path /students/{studentId}
     * @allow (create) Any user can create a student profile.
     * @allow (get) Any user can read a student profile.
     * @allow (list) Any user can list student profiles.
     * @allow (update) Any user can update a student profile.
     * @allow (delete) Any user can delete a student profile.
     * @deny (none) This rule allows all read and write requests, so no requests are denied.
     * @principle Open access for prototyping
     */
    match /students/{studentId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }

    /**
     * @description Allows read and write access to attendance records for all users.
     * @path /attendance/{attendanceId}
     * @allow (create) Any user can create an attendance record.
     * @allow (get) Any user can read an attendance record.
     * @allow (list) Any user can list attendance records.
     * @allow (update) Any user can update an attendance record.
     * @allow (delete) Any user can delete an attendance record.
     * @deny (none) This rule allows all read and write requests, so no requests are denied.
     * @principle Open access for prototyping
     */
    match /attendance/{attendanceId} {
      allow get, list: if true;
      allow create, update, delete: if true;
    }
  }
}