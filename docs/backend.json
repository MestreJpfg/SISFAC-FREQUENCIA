
{
  "entities": {
    "Student": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Student",
      "type": "object",
      "description": "Represents a student in the school attendance tracker.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The student's full name."
        },
        "grade": {
          "type": "string",
          "description": "The grade the student is in (e.g., '9º Ano')."
        },
        "class": {
          "type": "string",
          "description": "The class the student is in (e.g., 'A')."
        },
        "shift": {
          "type": "string",
          "description": "The shift the student attends (e.g., 'Manhã')."
        },
        "ensino": {
          "type": "string",
          "description": "The education level the student is in (e.g., 'Fundamental', 'Médio')."
        },
        "telefone": {
          "type": "string",
          "description": "The student's phone number(s). Multiple numbers can be separated by commas."
        }
      },
      "required": [
        "name",
        "grade",
        "class",
        "shift",
        "ensino"
      ]
    },
    "AttendanceRecord": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AttendanceRecord",
      "type": "object",
      "description": "Represents a single attendance record for a student on a specific date. This entity requires composite indexes for efficient querying on reports.",
      "properties": {
        "studentId": {
          "type": "string",
          "description": "The ID of the student this record belongs to."
        },
        "studentName": {
          "type": "string",
          "description": "The name of the student for easier querying."
        },
        "date": {
          "type": "string",
          "description": "The date of the attendance record in YYYY-MM-DD format.",
          "format": "date"
        },
        "status": {
          "type": "string",
          "description": "Indicates whether the student was present or absent.",
          "enum": [
            "present",
            "absent"
          ]
        },
        "ensino": {
          "type": "string",
          "description": "The education level of the student at the time of the record."
        },
        "grade": {
          "type": "string",
          "description": "The grade of the student at the time of the record."
        },
        "class": {
          "type": "string",
          "description": "The class of the student at the time of the record."
        },
        "shift": {
          "type": "string",
          "description": "The shift of the student at the time of the record."
        },
        "telefone": {
            "type": "string",
            "description": "The student's phone number(s) at the time of the record."
        }
      },
      "required": [
        "studentId",
        "studentName",
        "date",
        "status",
        "ensino",
        "grade",
        "class",
        "shift"
      ]
    },
    "UserProfile": {
        "title": "User Profile",
        "description": "Stores user-specific data, including their role for role-based access control.",
        "type": "object",
        "properties": {
            "uid": {
                "type": "string",
                "description": "The user's unique ID from Firebase Authentication."
            },
            "email": {
                "type": "string",
                "description": "The user's email address."
            },
            "role": {
                "type": "string",
                "description": "The role assigned to the user.",
                "enum": ["admin", "superUser", "user"]
            },
            "isActive": {
                "type": "boolean",
                "description": "Determines if the user's account is active and can access the system."
            }
        },
        "required": ["uid", "email", "role", "isActive"]
    }
  },
  "auth": {
    "providers": [
      "email",
      "google",
      "phone"
    ]
  },
  "firestore": {
    "/students/{studentId}": {
      "schema": {
        "$ref": "#/entities/Student"
      },
      "description": "Stores individual student data. The document ID is automatically generated by Firestore."
    },
    "/attendance/{attendanceId}": {
      "schema": {
        "$ref": "#/entities/AttendanceRecord"
      },
      "description": "Stores individual attendance records. The document ID is automatically generated by Firestore."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/UserProfile"
      },
      "description": "Stores user profile information, including their access role. The document ID must match the Firebase Auth UID."
    }
  }
}
